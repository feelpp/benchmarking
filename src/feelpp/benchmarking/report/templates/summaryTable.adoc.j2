
{%for child_repo_type,repo_table in aggregated["summary"].items()%}

[.scrollable]
--

{%if "latest_leaf" in repo_table.columns  %}
[cols="^1,^3,^3,^3,^3,^3", options="header"]
|===
| | *{{ child_repo_type }}* | Latest | # Runs | # Test Cases | # Failures

{% for row in repo_table.reset_index().to_dict(orient="records") %}
{% set row_url = "leaves/"+row["latest_leaf"]+"/leaf.adoc" %}
|{% if row["result"] == "pass" %}ðŸŸ¢{% else %}ðŸ”´{% endif %} | {{ row[repo_table.index.name] }} | xref:{{row_url}}[{{row["latest"]}}] | {{ row["num_runs"] }} | {{ row["num_cases"] }} | {{ row["num_failures"] }}
{% endfor %}
|===

{%else%}

[cols="^1,^3,^3,^3,^3", options="header"]
|===
| | *{{ child_repo_type }}* | # Runs | # Test Cases | # Failures

{% for row in repo_table.reset_index().to_dict(orient="records") %}
{%set row_url = "leaves/"+row["leaves"]+"/leaf.adoc" %}
|{% if row["result"] == "pass" %}ðŸŸ¢{% else %}ðŸ”´{% endif %} | xref:{{row_url}}[{{ row[repo_table.index.name] }}] | {{ row["num_runs"] }} | {{ row["num_cases"] }} | {{ row["num_failures"] }}
{% endfor %}
|===

{%endif%}


++++
<input type="text" id="filter_{{child_repo_type}}_table" placeholder="Filter testcases..." style="margin-bottom:0.5em;padding:0.3em;width:50%;">
++++
--

{% endfor %}

++++
<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.scrollable').forEach(scrollable => {
      const table = scrollable.querySelector('table');
      const filterInput = scrollable.querySelector('input[type="text"]');
      initTable(table, filterInput.id);
    });
  });
</script>
++++