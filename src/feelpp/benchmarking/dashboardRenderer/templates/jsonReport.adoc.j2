:leveloffset: +1

{% macro render_plot(figures_df, plot) %}
{% with figures_df=figures_df, plots=[plot.model_dump()] %}
    {% include "figures.adoc.j2"%}
{% endwith %}
{% endmacro %}


{% macro render_section(section, level=1) %}
{{'=' * level }}  {{ section.title }}

{% for child in section.content %}
{% if child.type == "text" %}
{{ child.text }}
{% elif child.type == "plot" %}
{{ render_plot(dataframe, child.plot) }}
{% elif child.type == "section" %}
{{ render_section(child, level + 1) }}
{% endif %}
{% endfor %}
{% endmacro %}


{% set json_report_controller = JsonReportController(config) %}


{% for contentNode in json_report_controller.generateReport() %}

{% if contentNode.type == "plot" %}
{{render_plot(dataframe,contentNode.plot)}}
{% elif contentNode.type == "text" %}
{{ contentNode.text }}
{% elif contentNode.type == "section" %}
{{ render_section(contentNode, 1) }}
{% endif %}

{% endfor %}
