{% macro render(tableNode, data) %}

{%set table = TableController(data,tableNode.table).generate() %}

{%if tableNode.title %}
*{{tableNode.title}}*
{% endif %}

[{% for classname in tableNode.table.style.classnames %}.{{classname}}{% endfor %}]
--
[options="header"]
|===

{% for col in table.columns %}|{{ col }}{% endfor %}

{% for row in table.itertuples(index=False) %}
{% for cell in row %}|{{ cell }}{% endfor %}
{% endfor %}

|===

{%if tableNode.filter %}
++++
<input type="text" id="filter_{{tableNode.title}}_table" placeholder="{{tableNode.filter.placeholder}}" style="{{tableNode.filter.style}}">
{% endif %}
++++
--

++++
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const table = document.querySelector('.sortable table');
    initTable(table, 'filter_{{tableNode.title}}_table');
  });
</script>
++++

{% endmacro %}