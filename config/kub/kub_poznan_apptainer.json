{
    "executable": "feelpp_kub_cem",
    "output_directory": "/data/scratch/cladellash/feelppdb/kub",
    "use_case_name": "poznan",
    "platform": {
        "type":"apptainer",
        "image":{
            "name":"/data/scratch/cladellash/images/kub.sif"
        },
        "options": [
            "--home /data/scratch/cladellash/feelppdb/",
            "--bind /data/home/cladellash/benchmarking/config/kub/cfg/:/input_data/"
        ]
    },
    "options": [
        "--config-file /input_data/Poznan.cfg",
        "--cem.database.directory {{output_directory}}/{{use_case_name}}/{{instance}}"
    ],
    "outputs": [],
    "scalability": {
        "directory": "{{output_directory}}/{{use_case_name}}/{{instance}}/cem/",
        "stages": [
            {
                "name":"",
                "file": "instances/np_{{parameters.nb_tasks.tasks.value}}/logs/timers.json",
                "format": "json",
                "variables_path":"*"
            },
            {
                "name":"",
                "file": "logs/timers.json",
                "format": "json",
                "variables_path":"*"
            }
        ]
    },
    "sanity": {
        "success": ["[ Stopping Feel++ ]"],
        "error": ["Error"]
    },
    "upload": {
        "platform": "girder",
        "folder_id": "672a1452b0e95728eb010b38"
    },
    "parameters": [
        {
            "name": "nb_tasks",
            "sequence": [
                {"tasks" : 8, "nodes":1, "exclusive_access":true},
                {"tasks" : 16, "nodes":1, "exclusive_access":true},
                {"tasks" : 32, "nodes":1, "exclusive_access":true},
                {"tasks" : 64, "nodes":1, "exclusive_access":true},
                {"tasks" : 128, "nodes":1, "exclusive_access":true}
            ]
        },
        {
            "name":"environment",
            "sequence":["apptainer"]
        }
    ],
    "plots": [
        {
            "title": "Absolute performance",
            "plot_types": [ "grouped_bar", "table" ],
            "transformation": "performance",
            "variables": [ "execute", "postprocess", "constructor", "updateForUse", "simulation" ],
            "names": [],
            "xaxis": {
                "parameter": "nb_tasks.tasks",
                "label": "Number of tasks"
            },
            "yaxis": {
                "label": "execution time (s)"
            }
        },
        {
            "title": "Relative performance",
            "plot_types": [ "stacked_bar", "grouped_bar" ],
            "transformation": "relative_performance",
            "variables": [ "execute", "postprocess", "constructor", "updateForUse", "simulation" ],
            "names": [],
            "xaxis": {
                "parameter": "nb_tasks.tasks",
                "label": "Number of tasks"
            },
            "yaxis": {
                "label": "execution time (s)"
            }
        },
        {
            "title": "Speedup",
            "plot_types": [ "scatter" ],
            "transformation": "speedup",
            "variables": [ "execute", "postprocess", "constructor", "updateForUse", "simulation" ],
            "names": [],
            "xaxis": {
                "parameter": "nb_tasks.tasks",
                "label": "Number of tasks"
            },
            "yaxis": {
                "label": "execution time (s)"
            }
        }
    ]
}